<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physio - The Therapeutic Moves</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #e8f5f3 0%, #f8f9fa 100%);
        }

        /* Header Styles - Made thinner and auto-hide */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease-in-out;
            height: 50px;
        }

        .header.hidden {
            transform: translateY(-100%);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #2c8577;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .logo-img {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            object-fit: cover;
        }

        .logo-placeholder {
            width: 28px;
            height: 28px;
            background: #e8f5f3;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2c8577;
            font-weight: bold;
            font-size: 0.7rem;
        }

        .hamburger {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            padding: 3px;
        }

        .hamburger span {
            width: 20px;
            height: 2px;
            background: #2c8577;
            margin: 1.5px 0;
            transition: 0.3s;
            border-radius: 1px;
        }

        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 280px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            transition: right 0.3s ease;
            padding: 2rem 0;
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu ul {
            list-style: none;
            padding: 0;
        }

        .mobile-menu ul li {
            padding: 1rem 2rem;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 1rem;
        }

        .mobile-menu ul li:hover {
            background: #f8f9fa;
        }

        .mobile-menu ul li:last-child {
            margin-top: 2rem;
            background: #e8f5f3;
            color: #2c8577;
            font-weight: 600;
        }

        .close-menu {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #2c8577;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Main Content */
        .main {
            margin-top: 50px;
        }

        /* Page container for separate pages */
        .page {
            display: none;
            min-height: calc(100vh - 50px);
            padding: 1rem;
        }

        .page.active {
            display: block;
        }

        .page-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-top: 1rem;
        }

        .page-title {
            font-size: 2rem;
            color: #2c8577;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .back-btn {
            position: fixed;
            top: 60px;
            left: 1rem;
            background: #2c8577;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(44, 133, 119, 0.3);
        }

        .back-btn:hover {
            background: #245a4f;
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #2c8577 0%, #4a9b8c 100%);
            color: white;
            text-align: center;
            padding: 2.5rem 1.5rem;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') bottom/100% auto no-repeat;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero .tagline {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .btn {
            display: inline-block;
            padding: 0.9rem 1.8rem;
            background: #fff;
            color: #2c8577;
            text-decoration: none;
            border-radius: 40px;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: #2c8577;
            color: white;
        }

        .phone-number {
            margin-top: 1rem;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Section Styles */
        .section {
            padding: 1.5rem;
        }

        .section-title {
            text-align: center;
            font-size: 1.6rem;
            color: #2c8577;
            margin-bottom: 1.2rem;
            font-weight: 700;
        }

        /* Homepage Doctors Section - Made smaller and more rounded */
        .doctors-preview {
            text-align: center;
            padding: 1.2rem;
            background: rgba(255, 255, 255, 0.7);
            margin: 1rem;
            border-radius: 25px;
        }

        .doctors-preview .section-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }

        .doctors-preview-container {
            display: flex;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .doctor-preview-card {
            width: 100px;
            background: white;
            border-radius: 20px;
            padding: 0.8rem;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .doctor-preview-card:hover {
            transform: translateY(-3px);
        }

        .doctor-preview-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e8f5f3 0%, #d1f2eb 100%);
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: #2c8577;
        }

        .doctor-preview-name {
            font-size: 0.8rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.2rem;
        }

        .doctor-preview-qualification {
            color: #666;
            font-size: 0.7rem;
        }

        .view-all-btn {
            background: #2c8577;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-block;
            font-size: 0.9rem;
        }

        .view-all-btn:hover {
            background: #245a4f;
            transform: translateY(-2px);
        }

        /* Homepage Services Section */
        .services-preview {
            padding: 1.5rem;
        }

        .services-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .service-preview-card {
            background: white;
            border-radius: 15px;
            padding: 1.2rem;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .service-preview-card:hover {
            transform: translateY(-3px);
        }

        .service-preview-icon {
            font-size: 2rem;
            margin-bottom: 0.8rem;
        }

        .service-preview-title {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .service-preview-description {
            color: #666;
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
        }

        /* Homepage Products Section */
        .products-preview {
            padding: 1.5rem;
        }

        .products-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .product-preview-card {
            background: white;
            border-radius: 15px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }

        .product-preview-card:hover {
            transform: translateY(-3px);
        }

        .product-preview-image {
            width: 100%;
            height: 100px;
            background: linear-gradient(135deg, #e8f5f3 0%, #d1f2eb 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #2c8577;
            margin-bottom: 0.8rem;
        }

        .product-preview-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.3rem;
        }

        .product-preview-price {
            color: #2c8577;
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.8rem;
        }

        /* Full page sections */
        .doctors-container, .services-container, .products-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            padding: 1rem 0;
            margin-top: 3rem;
        }

        .doctor-card, .service-card, .product-card {
            background: white;
            border-radius: 18px;
            padding: 1.8rem;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }

        .doctor-card:hover, .service-card:hover, .product-card:hover {
            transform: translateY(-4px);
        }

        .doctor-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e8f5f3 0%, #d1f2eb 100%);
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: #2c8577;
        }

        .doctor-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .doctor-qualification {
            color: #666;
            margin-bottom: 0.8rem;
        }

        .doctor-fees {
            color: #2c8577;
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        /* Service styles */
        .service-image {
            width: 100%;
            height: 130px;
            background: linear-gradient(135deg, #e8f5f3 0%, #d1f2eb 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #2c8577;
            margin-bottom: 1rem;
        }

        .service-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .service-description {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        /* Product styles */
        .product-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #e8f5f3 0%, #d1f2eb 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #2c8577;
            margin-bottom: 1rem;
        }

        .product-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .product-description {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c8577;
            margin-bottom: 1rem;
        }

        /* Doctor Details Modal */
        .doctor-details {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .doctor-details-content {
            background-color: white;
            margin: 15% auto;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            text-align: center;
        }

        /* Admin Login Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 1rem;
            top: 1rem;
        }

        .close:hover {
            color: #2c8577;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e8f5f3;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #2c8577;
        }

        /* Enhanced Admin Dashboard */
        .admin-dashboard {
            display: none;
            background: #f8f9fa;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .admin-dashboard.active {
            display: block;
        }

        .admin-header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h2 {
            color: #333;
            font-weight: 600;
            margin: 0;
        }

        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-btn:hover {
            background: #c82333;
        }

        .admin-tabs {
            background: white;
            display: flex;
            border-bottom: 1px solid #dee2e6;
        }

        .admin-tab {
            padding: 1rem 1.5rem;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 0.9rem;
            color: #495057;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .admin-tab.active {
            color: #007bff;
            border-bottom-color: #007bff;
            font-weight: 600;
        }

        .admin-tab:hover {
            background: #f8f9fa;
        }

        .admin-content {
            padding: 2rem;
            max-width: 800px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .form-section {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }

        .form-section h3 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row.two-col {
            grid-template-columns: 1fr 1fr;
        }

        .form-field {
            display: flex;
            flex-direction: column;
        }

        .form-field label {
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #495057;
        }

        .form-field input,
        .form-field textarea,
        .form-field select {
            padding: 0.75rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .form-field input:focus,
        .form-field textarea:focus,
        .form-field select:focus {
            outline: 0;
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
        }

        .form-field textarea {
            min-height: 100px;
            resize: vertical;
        }

        .url-input {
            position: relative;
        }

        .url-preview {
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #6c757d;
        }

        .image-preview {
            max-width: 200px;
            max-height: 150px;
            border-radius: 4px;
            margin-top: 0.5rem;
        }

        .update-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        .update-btn:hover {
            background: #218838;
        }

        .add-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .add-btn:hover {
            background: #0056b3;
        }

        .item-list {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .item {
            padding: 1rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item:last-child {
            border-bottom: none;
        }

        .item-info h4 {
            margin: 0 0 0.25rem 0;
            color: #333;
        }

        .item-info p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .item-actions {
            display: flex;
            gap: 0.5rem;
        }

        .edit-btn, .delete-btn {
            padding: 0.25rem 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .edit-btn {
            background: #17a2b8;
            color: white;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        .edit-btn:hover {
            background: #138496;
        }

        .delete-btn:hover {
            background: #c82333;
        }

        /* Edit Form Modal */
        .edit-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .edit-modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        /* Service Details Modal */
        .service-details {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .service-details-content {
            background-color: white;
            margin: 10% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            position: relative;
            max-height: 70vh;
            overflow-y: auto;
        }

        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid #f0f0f0;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 0.5rem 1rem;
            }

            .logo {
                font-size: 0.8rem;
            }

            .hero h1 {
                font-size: 1.8rem;
            }

            .hero .tagline {
                font-size: 1rem;
            }

            .section {
                padding: 1rem;
            }

            .doctors-preview-container {
                gap: 0.5rem;
            }

            .doctor-preview-card {
                width: 90px;
                padding: 0.6rem;
            }

            .page {
                padding: 0.5rem;
            }

            .doctors-container, .services-container, .products-container {
                grid-template-columns: 1fr;
                gap: 1.2rem;
                margin-top: 2rem;
            }

            .back-btn {
                top: 55px;
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .page-title {
                font-size: 1.6rem;
            }

            .services-preview-grid, .products-preview-grid {
                grid-template-columns: 1fr;
            }

            .admin-tabs {
                flex-wrap: wrap;
            }

            .admin-tab {
                flex: 1;
                min-width: 120px;
            }

            .admin-content {
                padding: 1rem;
            }

            .form-row.two-col {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="logo">
            <img src="https://via.placeholder.com/32x32/2c8577/ffffff?text=LOGO" alt="Logo" class="logo-img" id="clinicLogo">
            <span id="clinicName">Physio - The Therapeutic Moves</span>
        </div>
        <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <button class="close-menu" onclick="toggleMenu()">&times;</button>
        <ul>
            <li onclick="showPage('home')">Home</li>
            <li onclick="showPage('doctors')">Doctors</li>
            <li onclick="showPage('services')">Services</li>
            <li onclick="showPage('products')">Products</li>
            <li onclick="showAdminLogin()">Admin Login</li>
        </ul>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <!-- Main Content -->
    <main class="main">
        <!-- Home Page -->
        <div class="page active" id="homePage">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h1 id="heroTitle">Therapeutic Moves</h1>
                    <p class="tagline" id="heroTagline">"We add life in your days."</p>
                    <button class="btn" onclick="bookAppointment()">Book Appointment</button>
                    <div class="phone-number" id="phoneNumber">üìû +91 9641568109</div>
                </div>
            </section>

            <!-- Doctors Preview Section -->
            <section class="doctors-preview">
                <h2 class="section-title">Our Expert Team</h2>
                <div class="doctors-preview-container" id="doctorsPreview">
                    <!-- Preview doctors will be loaded here -->
                </div>
                <a href="#" class="view-all-btn" onclick="showPage('doctors')">View All Doctors</a>
            </section>

            <!-- Services Preview Section -->
            <section class="services-preview">
                <h2 class="section-title">Our Services</h2>
                <div class="services-preview-grid" id="servicesPreview">
                    <!-- Preview services will be loaded here -->
                </div>
                <a href="#" class="view-all-btn" onclick="showPage('services')">View All Services</a>
            </section>

            <!-- Products Preview Section -->
            <section class="products-preview">
                <h2 class="section-title">Our Products</h2>
                <div class="products-preview-grid" id="productsPreview">
                    <!-- Preview products will be loaded here -->
                </div>
                <a href="#" class="view-all-btn" onclick="showPage('products')">View All Products</a>
            </section>
        </div>

        <!-- Doctors Page -->
        <div class="page" id="doctorsPage">
            <button class="back-btn" onclick="showPage('home')">‚Üê Back</button>
            <div class="page-header">
                <h1 class="page-title">Our Doctors</h1>
            </div>
            <div class="doctors-container" id="doctorsContainer">
                <!-- Doctors will be loaded here -->
            </div>
        </div>

        <!-- Services Page -->
        <div class="page" id="servicesPage">
            <button class="back-btn" onclick="showPage('home')">‚Üê Back</button>
            <div class="page-header">
                <h1 class="page-title">Our Services</h1>
            </div>
            <div class="services-container" id="servicesContainer">
                <!-- Services will be loaded here -->
            </div>
        </div>

        <!-- Products Page -->
        <div class="page" id="productsPage">
            <button class="back-btn" onclick="showPage('home')">‚Üê Back</button>
            <div class="page-header">
                <h1 class="page-title">Our Products</h1>
            </div>
            <div class="products-container" id="productsContainer">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Doctor Details Modal -->
    <div id="doctorDetailsModal" class="doctor-details">
        <div class="doctor-details-content">
            <span class="close" onclick="closeDoctorDetails()">&times;</span>
            <div class="doctor-avatar" id="modalDoctorAvatar">üë®‚Äç‚öïÔ∏è</div>
            <h2 id="modalDoctorName" style="color: #2c8577; margin-bottom: 0.5rem;"></h2>
            <p id="modalDoctorQualification" style="color: #666; margin-bottom: 0.5rem;"></p>
            <p id="modalDoctorFees" style="color: #2c8577; font-weight: 600; font-size: 1.2rem; margin-bottom: 1rem;"></p>
            <p id="modalDoctorDetails" style="color: #666; margin-bottom: 1.5rem;"></p>
            <button class="btn btn-primary" id="modalBookingBtn">Book Appointment</button>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAdminModal()">&times;</span>
            <h2 style="color: #2c8577; margin-bottom: 1rem;">Admin Login</h2>
            <form id="adminLoginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
            </form>
        </div>
    </div>

    <!-- Service Details Modal -->
    <div id="serviceDetailsModal" class="service-details">
        <div class="service-details-content">
            <span class="close" onclick="closeServiceDetails()">&times;</span>
            <h2 id="serviceDetailsTitle" style="color: #2c8577; margin-bottom: 1rem;"></h2>
            <div id="serviceDetailsContent">
                <!-- Service details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="edit-modal">
        <div class="edit-modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h3 id="editModalTitle">Edit Item</h3>
            <div id="editModalContent">
                <!-- Edit form will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Enhanced Admin Dashboard -->
    <div class="admin-dashboard" id="adminDashboard">
        <header class="admin-header">
            <h2>Admin Dashboard</h2>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </header>

        <nav class="admin-tabs">
            <button class="admin-tab active" data-tab="clinic">Clinic Info</button>
            <button class="admin-tab" data-tab="doctors">Doctors</button>
            <button class="admin-tab" data-tab="services">Services</button>
            <button class="admin-tab" data-tab="products">Products</button>
        </nav>

        <div class="admin-content">
            <!-- Clinic Info Tab -->
            <div class="tab-panel active" id="clinic-panel">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalDoctors">3</div>
                        <div class="stat-label">Total Doctors</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalServices">3</div>
                        <div class="stat-label">Total Services</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalProducts">3</div>
                        <div class="stat-label">Total Products</div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Clinic Information</h3>
                    <div class="form-row two-col">
                        <div class="form-field">
                            <label>Clinic Name</label>
                            <input type="text" id="adminClinicName" placeholder="Enter clinic name">
                        </div>
                        <div class="form-field">
                            <label>Phone</label>
                            <input type="tel" id="adminPhone" placeholder="Enter phone number">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label>Tagline</label>
                            <input type="text" id="adminTagline" placeholder="Enter tagline">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label>Email</label>
                            <input type="email" id="adminEmail" placeholder="Enter email address">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label>Logo URL (imgbb, etc.)</label>
                            <input type="url" id="adminLogoUrl" placeholder="https://i.ibb.co/..." oninput="previewImage(this, 'logoPreview')">
                            <img id="logoPreview" class="image-preview" style="display: none;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label>Banner Image URL (imgbb, etc.)</label>
                            <input type="url" id="bannerImageUrl" placeholder="https://i.ibb.co/..." oninput="previewImage(this, 'bannerPreview')">
                            <img id="bannerPreview" class="image-preview" style="display: none;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label>Banner Video URL (Optional)</label>
                            <input type="url" id="bannerVideoUrl" placeholder="https://www.youtube.com/watch?v=...">
                        </div>
                    </div>
                    <button class="update-btn" onclick="updateClinicInfo()">Update Clinic Info</button>
                </div>
            </div>

            <!-- Doctors Tab -->
            <div class="tab-panel" id="doctors-panel">
                <button class="add-btn" onclick="addNewDoctor()">Add New Doctor</button>
                <div class="item-list" id="doctorsAdminList">
                    <!-- Doctors will be loaded here -->
                </div>
            </div>

            <!-- Services Tab -->
            <div class="tab-panel" id="services-panel">
                <button class="add-btn" onclick="addNewService()">Add New Service</button>
                <div class="item-list" id="servicesAdminList">
                    <!-- Services will be loaded here -->
                </div>
            </div>

            <!-- Products Tab -->
            <div class="tab-panel" id="products-panel">
                <button class="add-btn" onclick="addNewProduct()">Add New Product</button>
                <div class="item-list" id="productsAdminList">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Firebase Configuration
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js';
        import { getDatabase, ref, get, set, push, remove, update, onValue } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js';
        import { getAuth, signInWithEmailAndPassword, signOut } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAuk3feAZjoHF2VwdWtA0F4lhQKarU0w-4",
            authDomain: "clinic-bdf92.firebaseapp.com",
            databaseURL: "https://clinic-bdf92-default-rtdb.firebaseio.com",
            projectId: "clinic-bdf92",
            storageBucket: "clinic-bdf92.firebasestorage.app",
            messagingSenderId: "302452317883",
            appId: "1:302452317883:web:6585bf22ea1a7f3a96939e",
            measurementId: "G-XZXEVNMVRS"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);

        // Global variables
        window.siteData = {
            hero: {
                clinicName: "Physio - The Therapeutic Moves",
                title: "Therapeutic Moves",
                tagline: '"We add life in your days."',
                phone: "+91 9641568109",
                email: "DrArpanDas.PT@gmail.com",
                logoUrl: "",
                bannerImageUrl: "",
                bannerVideoUrl: ""
            },
            doctors: [
                {
                    id: 1,
                    name: "Dr. Arpan Das",
                    qualification: "BPT",
                    fees: "‚Çπ500",
                    details: "Experienced physiotherapist specializing in sports injuries and rehabilitation.",
                    photoUrl: "",
                    videoUrl: ""
                },
                {
                    id: 2,
                    name: "Dr. Jhunu Das",
                    qualification: "DPT",
                    fees: "‚Çπ600",
                    details: "Expert in neurological rehabilitation and pediatric physiotherapy.",
                    photoUrl: "",
                    videoUrl: ""
                },
                {
                    id: 3,
                    name: "Dr. Apurba Das",
                    qualification: "DPT",
                    fees: "‚Çπ600",
                    details: "Specialist in orthopedic conditions and manual therapy techniques.",
                    photoUrl: "",
                    videoUrl: ""
                }
            ],
            services: [
                {
                    id: 1,
                    title: "Physical Therapy",
                    description: "Comprehensive physical rehabilitation and therapeutic exercises.",
                    icon: "üèÉ‚Äç‚ôÇÔ∏è",
                    bannerImageUrl: "",
                    bannerVideoUrl: "",
                    tests: [
                        { name: "Movement Assessment", price: "‚Çπ300" },
                        { name: "Strength Testing", price: "‚Çπ250" },
                        { name: "Range of Motion Test", price: "‚Çπ200" }
                    ]
                },
                {
                    id: 2,
                    title: "Pain Management",
                    description: "Specialized treatment for chronic and acute pain conditions.",
                    icon: "üíä",
                    bannerImageUrl: "",
                    bannerVideoUrl: "",
                    tests: [
                        { name: "Pain Assessment", price: "‚Çπ400" },
                        { name: "Trigger Point Therapy", price: "‚Çπ600" },
                        { name: "TENS Therapy", price: "‚Çπ500" }
                    ]
                },
                {
                    id: 3,
                    title: "Sports Rehabilitation",
                    description: "Recovery programs for sports-related injuries and performance enhancement.",
                    icon: "‚öΩ",
                    bannerImageUrl: "",
                    bannerVideoUrl: "",
                    tests: [
                        { name: "Sports Injury Assessment", price: "‚Çπ500" },
                        { name: "Performance Analysis", price: "‚Çπ700" },
                        { name: "Return to Sport Testing", price: "‚Çπ600" }
                    ]
                }
            ],
            products: [
                {
                    id: 1,
                    name: "Lumbar Support Belt",
                    description: "Medical grade lumbar support for back pain relief",
                    price: "‚Çπ1200",
                    imageUrl: "",
                    videoUrl: ""
                },
                {
                    id: 2,
                    name: "Knee Support Brace",
                    description: "Adjustable knee brace for injury support and prevention",
                    price: "‚Çπ800",
                    imageUrl: "",
                    videoUrl: ""
                },
                {
                    id: 3,
                    name: "Resistance Bands Set",
                    description: "Professional resistance bands for rehabilitation exercises",
                    price: "‚Çπ600",
                    imageUrl: "",
                    videoUrl: ""
                }
            ]
        };

        // Setup real-time listener for automatic updates
        const siteRef = ref(database, 'site');
        onValue(siteRef, (snapshot) => {
            if (snapshot.exists()) {
                const data = snapshot.val();
                window.siteData = { ...window.siteData, ...data };
                renderSite();
                updateAdminForm();
                updateStats();
            }
        });

        // Header auto-hide functionality
        let lastScrollTop = 0;
        const header = document.getElementById('header');

        window.addEventListener('scroll', function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > lastScrollTop && scrollTop > 80) {
                header.classList.add('hidden');
            } else {
                header.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        });

        // Page navigation
        window.currentPage = 'home';

        window.showPage = function(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById(pageId + 'Page').classList.add('active');
            window.currentPage = pageId;
            
            if (document.getElementById('mobileMenu').classList.contains('active')) {
                toggleMenu();
            }
            
            window.scrollTo(0, 0);
        }

        // Admin Dashboard Tab Navigation
        function initAdminTabs() {
            const tabs = document.querySelectorAll('.admin-tab');
            const panels = document.querySelectorAll('.tab-panel');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    panels.forEach(p => p.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab + '-panel').classList.add('active');
                });
            });
        }

        // Image Preview Function
        window.previewImage = function(input, previewId) {
            const preview = document.getElementById(previewId);
            if (input.value && isValidImageUrl(input.value)) {
                preview.src = input.value;
                preview.style.display = 'block';
                preview.onerror = () => {
                    preview.style.display = 'none';
                };
            } else {
                preview.style.display = 'none';
            }
        }

        function isValidImageUrl(url) {
            return /\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(url) || url.includes('i.ibb.co') || url.includes('imgur.com');
        }

        // Load data from Firebase or use default
        async function loadSiteData() {
            try {
                const snapshot = await get(ref(database, 'site'));
                if (snapshot.exists()) {
                    window.siteData = { ...window.siteData, ...snapshot.val() };
                }
            } catch (error) {
                console.log('Using default data:', error);
            }
            
            renderSite();
            updateStats();
        }

        // Update Statistics
        function updateStats() {
            document.getElementById('totalDoctors').textContent = window.siteData.doctors?.length || 0;
            document.getElementById('totalServices').textContent = window.siteData.services?.length || 0;
            document.getElementById('totalProducts').textContent = window.siteData.products?.length || 0;
        }

        // Update admin form with current data
        function updateAdminForm() {
            if (window.siteData.hero) {
                const hero = window.siteData.hero;
                document.getElementById('adminClinicName').value = hero.clinicName || '';
                document.getElementById('adminTagline').value = hero.tagline || '';
                document.getElementById('adminPhone').value = hero.phone || '';
                document.getElementById('adminEmail').value = hero.email || '';
                document.getElementById('adminLogoUrl').value = hero.logoUrl || '';
                document.getElementById('bannerImageUrl').value = hero.bannerImageUrl || '';
                document.getElementById('bannerVideoUrl').value = hero.bannerVideoUrl || '';

                // Update logo if URL exists
                if (hero.logoUrl) {
                    const logoImg = document.getElementById('clinicLogo');
                    if (logoImg) {
                        logoImg.src = hero.logoUrl;
                    }
                    previewImage(document.getElementById('adminLogoUrl'), 'logoPreview');
                }

                if (hero.bannerImageUrl) {
                    previewImage(document.getElementById('bannerImageUrl'), 'bannerPreview');
                }
            }
        }

        // FIXED UPDATE FUNCTION - This was causing the error
        window.updateClinicInfo = async function() {
            const heroData = {
                clinicName: document.getElementById('adminClinicName').value.trim(),
                title: document.getElementById('adminClinicName').value.trim(),
                tagline: document.getElementById('adminTagline').value.trim(),
                phone: document.getElementById('adminPhone').value.trim(),
                email: document.getElementById('adminEmail').value.trim(),
                logoUrl: document.getElementById('adminLogoUrl').value.trim(),
                bannerImageUrl: document.getElementById('bannerImageUrl').value.trim(),
                bannerVideoUrl: document.getElementById('bannerVideoUrl').value.trim()
            };
            
            try {
                // Use update() instead of set() to update only specific fields
                await update(ref(database, 'site/hero'), heroData);
                
                // Update local data
                window.siteData.hero = { ...window.siteData.hero, ...heroData };
                
                // Update UI immediately
                renderHero();
                
                // Update logo if URL provided
                if (heroData.logoUrl) {
                    const logoImg = document.getElementById('clinicLogo');
                    if (logoImg) {
                        logoImg.src = heroData.logoUrl;
                    }
                }
                
                alert('Clinic information updated successfully!');
            } catch (error) {
                console.error('Error updating clinic information:', error);
                alert('Error updating clinic information: ' + error.message);
            }
        }

        // Render site content
        function renderSite() {
            renderHero();
            renderDoctorsPreview();
            renderServicesPreview();
            renderProductsPreview();
            renderDoctors();
            renderServices();
            renderProducts();
            renderAdminLists();
        }

        function renderHero() {
            if (window.siteData.hero) {
                document.getElementById('clinicName').textContent = window.siteData.hero.clinicName;
                document.getElementById('heroTitle').textContent = window.siteData.hero.title;
                document.getElementById('heroTagline').textContent = window.siteData.hero.tagline;
                document.getElementById('phoneNumber').innerHTML = `üìû ${window.siteData.hero.phone}`;
            }
        }

        function renderDoctorsPreview() {
            const container = document.getElementById('doctorsPreview');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.doctors?.slice(0, 3).forEach(doctor => {
                const doctorCard = document.createElement('div');
                doctorCard.className = 'doctor-preview-card';
                doctorCard.onclick = () => showDoctorDetails(doctor);
                
                const avatarContent = doctor.photoUrl ? 
                    `<img src="${doctor.photoUrl}" alt="${doctor.name}" style="width: 45px; height: 45px; border-radius: 50%; object-fit: cover;">` :
                    '<div class="doctor-preview-avatar">üë®‚Äç‚öïÔ∏è</div>';
                
                doctorCard.innerHTML = `
                    ${avatarContent}
                    <div class="doctor-preview-name">${doctor.name.replace('Dr. ', '')}</div>
                    <div class="doctor-preview-qualification">${doctor.qualification}</div>
                `;
                container.appendChild(doctorCard);
            });
        }

        function renderServicesPreview() {
            const container = document.getElementById('servicesPreview');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.services?.slice(0, 3).forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-preview-card';
                serviceCard.onclick = () => showServiceDetails(service);
                serviceCard.innerHTML = `
                    <div class="service-preview-icon">${service.icon}</div>
                    <div class="service-preview-title">${service.title}</div>
                    <div class="service-preview-description">${service.description}</div>
                    <button class="btn btn-primary">View Details</button>
                `;
                container.appendChild(serviceCard);
            });
        }

        function renderProductsPreview() {
            const container = document.getElementById('productsPreview');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.products?.slice(0, 3).forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-preview-card';
                
                const imageContent = product.imageUrl ?
                    `<img src="${product.imageUrl}" alt="${product.name}" style="width: 100%; height: 100px; object-fit: cover; border-radius: 10px; margin-bottom: 0.8rem;">` :
                    '<div class="product-preview-image">üéí</div>';
                
                productCard.innerHTML = `
                    ${imageContent}
                    <div class="product-preview-title">${product.name}</div>
                    <div class="product-preview-price">${product.price}</div>
                    <button class="btn btn-primary" onclick="buyProduct('${product.name}')">
                        üõí Buy Now
                    </button>
                `;
                container.appendChild(productCard);
            });
        }

        function renderDoctors() {
            const container = document.getElementById('doctorsContainer');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.doctors?.forEach(doctor => {
                const doctorCard = document.createElement('div');
                doctorCard.className = 'doctor-card';
                
                const avatarContent = doctor.photoUrl ?
                    `<img src="${doctor.photoUrl}" alt="${doctor.name}" style="width: 70px; height: 70px; border-radius: 50%; object-fit: cover; margin: 0 auto 1rem;">` :
                    '<div class="doctor-avatar">üë®‚Äç‚öïÔ∏è</div>';
                
                doctorCard.innerHTML = `
                    ${avatarContent}
                    <div class="doctor-name">${doctor.name}</div>
                    <div class="doctor-qualification">${doctor.qualification}</div>
                    <div class="doctor-fees">${doctor.fees}</div>
                    <p style="margin: 1rem 0; color: #666; font-size: 0.9rem;">${doctor.details}</p>
                    <button class="btn btn-primary" onclick="bookDoctorAppointment('${doctor.name}')">
                        Book Appointment
                    </button>
                `;
                container.appendChild(doctorCard);
            });
        }

        function renderServices() {
            const container = document.getElementById('servicesContainer');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.services?.forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-card';
                
                const imageContent = service.bannerImageUrl ?
                    `<img src="${service.bannerImageUrl}" alt="${service.title}" style="width: 100%; height: 130px; object-fit: cover; border-radius: 12px; margin-bottom: 1rem;">` :
                    `<div class="service-image">${service.icon}</div>`;
                
                serviceCard.innerHTML = `
                    ${imageContent}
                    <div class="service-title">${service.title}</div>
                    <div class="service-description">${service.description}</div>
                    <button class="btn btn-primary" onclick="showServiceDetails(${JSON.stringify(service).replace(/"/g, '&quot;')})">
                        View Details
                    </button>
                `;
                container.appendChild(serviceCard);
            });
        }

        function renderProducts() {
            const container = document.getElementById('productsContainer');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.products?.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                const imageContent = product.imageUrl ?
                    `<img src="${product.imageUrl}" alt="${product.name}" style="width: 100%; height: 160px; object-fit: cover; border-radius: 12px; margin-bottom: 1rem;">` :
                    '<div class="product-image">üéí</div>';
                
                productCard.innerHTML = `
                    ${imageContent}
                    <div class="product-title">${product.name}</div>
                    <div class="product-description">${product.description}</div>
                    <div class="product-price">${product.price}</div>
                    <button class="btn btn-primary" onclick="buyProduct('${product.name}')">
                        üõí Buy Now on WhatsApp
                    </button>
                `;
                container.appendChild(productCard);
            });
        }

        // Render Admin Lists
        function renderAdminLists() {
            renderDoctorsAdminList();
            renderServicesAdminList();
            renderProductsAdminList();
        }

        function renderDoctorsAdminList() {
            const container = document.getElementById('doctorsAdminList');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.doctors?.forEach(doctor => {
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <div class="item-info">
                        <h4>${doctor.name}</h4>
                        <p>${doctor.qualification} - ${doctor.fees}</p>
                    </div>
                    <div class="item-actions">
                        <button class="edit-btn" onclick="editDoctor(${doctor.id})">Edit</button>
                        <button class="delete-btn" onclick="deleteDoctor(${doctor.id})">Delete</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function renderServicesAdminList() {
            const container = document.getElementById('servicesAdminList');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.services?.forEach(service => {
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <div class="item-info">
                        <h4>${service.title}</h4>
                        <p>${service.description}</p>
                    </div>
                    <div class="item-actions">
                        <button class="edit-btn" onclick="editService(${service.id})">Edit</button>
                        <button class="delete-btn" onclick="deleteService(${service.id})">Delete</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function renderProductsAdminList() {
            const container = document.getElementById('productsAdminList');
            if (!container) return;
            container.innerHTML = '';
            
            window.siteData.products?.forEach(product => {
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <div class="item-info">
                        <h4>${product.name}</h4>
                        <p>${product.price} - ${product.description}</p>
                    </div>
                    <div class="item-actions">
                        <button class="edit-btn" onclick="editProduct(${product.id})">Edit</button>
                        <button class="delete-btn" onclick="deleteProduct(${product.id})">Delete</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Doctor Management
        window.addNewDoctor = function() {
            showEditModal('doctor', null);
        }

        window.editDoctor = function(id) {
            const doctor = window.siteData.doctors?.find(d => d.id === id);
            showEditModal('doctor', doctor);
        }

        window.deleteDoctor = async function(id) {
            if (confirm('Are you sure you want to delete this doctor?')) {
                window.siteData.doctors = window.siteData.doctors.filter(d => d.id !== id);
                await update(ref(database, 'site'), { doctors: window.siteData.doctors });
                renderAdminLists();
                renderSite();
                updateStats();
            }
        }

        // Service Management
        window.addNewService = function() {
            showEditModal('service', null);
        }

        window.editService = function(id) {
            const service = window.siteData.services?.find(s => s.id === id);
            showEditModal('service', service);
        }

        window.deleteService = async function(id) {
            if (confirm('Are you sure you want to delete this service?')) {
                window.siteData.services = window.siteData.services.filter(s => s.id !== id);
                await update(ref(database, 'site'), { services: window.siteData.services });
                renderAdminLists();
                renderSite();
                updateStats();
            }
        }

        // Product Management
        window.addNewProduct = function() {
            showEditModal('product', null);
        }

        window.editProduct = function(id) {
            const product = window.siteData.products?.find(p => p.id === id);
            showEditModal('product', product);
        }

        window.deleteProduct = async function(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                window.siteData.products = window.siteData.products.filter(p => p.id !== id);
                await update(ref(database, 'site'), { products: window.siteData.products });
                renderAdminLists();
                renderSite();
                updateStats();
            }
        }

        // Edit Modal Functions
        function showEditModal(type, item) {
            const modal = document.getElementById('editModal');
            const title = document.getElementById('editModalTitle');
            const content = document.getElementById('editModalContent');
            
            title.textContent = item ? `Edit ${type.charAt(0).toUpperCase() + type.slice(1)}` : `Add New ${type.charAt(0).toUpperCase() + type.slice(1)}`;
            
            let formHtml = '';
            
            switch(type) {
                case 'doctor':
                    formHtml = `
                        <div class="form-row">
                            <div class="form-field">
                                <label>Name</label>
                                <input type="text" id="editName" value="${item ? item.name : ''}" required>
                            </div>
                        </div>
                        <div class="form-row two-col">
                            <div class="form-field">
                                <label>Qualification</label>
                                <input type="text" id="editQualification" value="${item ? item.qualification : ''}" required>
                            </div>
                            <div class="form-field">
                                <label>Consultation Fees</label>
                                <input type="text" id="editFees" value="${item ? item.fees : ''}" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Photo URL (imgbb, etc.)</label>
                                <input type="url" id="editPhotoUrl" value="${item ? item.photoUrl || '' : ''}" oninput="previewImage(this, 'editPhotoPreview')">
                                <img id="editPhotoPreview" class="image-preview" style="display: none;">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Video URL (Optional)</label>
                                <input type="url" id="editVideoUrl" value="${item ? item.videoUrl || '' : ''}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Description/Details</label>
                                <textarea id="editDetails" required>${item ? item.details : ''}</textarea>
                            </div>
                        </div>
                        <button class="update-btn" onclick="saveDoctor(${item ? item.id : 'null'})">Save Doctor</button>
                    `;
                    break;
                case 'service':
                    formHtml = `
                        <div class="form-row">
                            <div class="form-field">
                                <label>Title</label>
                                <input type="text" id="editTitle" value="${item ? item.title : ''}" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Icon (Emoji)</label>
                                <input type="text" id="editIcon" value="${item ? item.icon : ''}" maxlength="5">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Description</label>
                                <textarea id="editDescription" required>${item ? item.description : ''}</textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Banner Image URL (imgbb, etc.)</label>
                                <input type="url" id="editBannerImageUrl" value="${item ? item.bannerImageUrl || '' : ''}" oninput="previewImage(this, 'editBannerPreview')">
                                <img id="editBannerPreview" class="image-preview" style="display: none;">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Banner Video URL (Optional)</label>
                                <input type="url" id="editBannerVideoUrl" value="${item ? item.bannerVideoUrl || '' : ''}">
                            </div>
                        </div>
                        <button class="update-btn" onclick="saveService(${item ? item.id : 'null'})">Save Service</button>
                    `;
                    break;
                case 'product':
                    formHtml = `
                        <div class="form-row">
                            <div class="form-field">
                                <label>Product Name</label>
                                <input type="text" id="editProductName" value="${item ? item.name : ''}" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Price</label>
                                <input type="text" id="editPrice" value="${item ? item.price : ''}" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Description</label>
                                <textarea id="editProductDescription" required>${item ? item.description : ''}</textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Image URL (imgbb, etc.)</label>
                                <input type="url" id="editImageUrl" value="${item ? item.imageUrl || '' : ''}" oninput="previewImage(this, 'editImagePreview')">
                                <img id="editImagePreview" class="image-preview" style="display: none;">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>Video URL (Optional)</label>
                                <input type="url" id="editProductVideoUrl" value="${item ? item.videoUrl || '' : ''}">
                            </div>
                        </div>
                        <button class="update-btn" onclick="saveProduct(${item ? item.id : 'null'})">Save Product</button>
                    `;
                    break;
            }
            
            content.innerHTML = formHtml;
            modal.style.display = 'block';
            
            // Preview existing images
            setTimeout(() => {
                if (type === 'doctor' && item && item.photoUrl) {
                    previewImage(document.getElementById('editPhotoUrl'), 'editPhotoPreview');
                } else if (type === 'service' && item && item.bannerImageUrl) {
                    previewImage(document.getElementById('editBannerImageUrl'), 'editBannerPreview');
                } else if (type === 'product' && item && item.imageUrl) {
                    previewImage(document.getElementById('editImageUrl'), 'editImagePreview');
                }
            }, 100);
        }

        // Save Functions
        window.saveDoctor = async function(id) {
            const doctorData = {
                id: id || Date.now(),
                name: document.getElementById('editName').value,
                qualification: document.getElementById('editQualification').value,
                fees: document.getElementById('editFees').value,
                photoUrl: document.getElementById('editPhotoUrl').value,
                videoUrl: document.getElementById('editVideoUrl').value,
                details: document.getElementById('editDetails').value
            };
            
            if (id) {
                const index = window.siteData.doctors.findIndex(d => d.id === id);
                window.siteData.doctors[index] = doctorData;
            } else {
                window.siteData.doctors.push(doctorData);
            }
            
            try {
                await update(ref(database, 'site'), { doctors: window.siteData.doctors });
                closeEditModal();
                renderAdminLists();
                renderSite();
                updateStats();
                alert('Doctor saved successfully!');
            } catch (error) {
                alert('Error saving doctor');
                console.error(error);
            }
        }

        window.saveService = async function(id) {
            const serviceData = {
                id: id || Date.now(),
                title: document.getElementById('editTitle').value,
                icon: document.getElementById('editIcon').value,
                description: document.getElementById('editDescription').value,
                bannerImageUrl: document.getElementById('editBannerImageUrl').value,
                bannerVideoUrl: document.getElementById('editBannerVideoUrl').value,
                tests: id ? window.siteData.services.find(s => s.id === id).tests : []
            };
            
            if (id) {
                const index = window.siteData.services.findIndex(s => s.id === id);
                window.siteData.services[index] = serviceData;
            } else {
                window.siteData.services.push(serviceData);
            }
            
            try {
                await update(ref(database, 'site'), { services: window.siteData.services });
                closeEditModal();
                renderAdminLists();
                renderSite();
                updateStats();
                alert('Service saved successfully!');
            } catch (error) {
                alert('Error saving service');
                console.error(error);
            }
        }

        window.saveProduct = async function(id) {
            const productData = {
                id: id || Date.now(),
                name: document.getElementById('editProductName').value,
                price: document.getElementById('editPrice').value,
                description: document.getElementById('editProductDescription').value,
                imageUrl: document.getElementById('editImageUrl').value,
                videoUrl: document.getElementById('editProductVideoUrl').value
            };
            
            if (id) {
                const index = window.siteData.products.findIndex(p => p.id === id);
                window.siteData.products[index] = productData;
            } else {
                window.siteData.products.push(productData);
            }
            
            try {
                await update(ref(database, 'site'), { products: window.siteData.products });
                closeEditModal();
                renderAdminLists();
                renderSite();
                updateStats();
                alert('Product saved successfully!');
            } catch (error) {
                alert('Error saving product');
                console.error(error);
            }
        }

        window.closeEditModal = function() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Global functions
        window.toggleMenu = function() {
            const menu = document.getElementById('mobileMenu');
            const overlay = document.getElementById('overlay');
            menu.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        window.bookAppointment = function() {
            const message = encodeURIComponent("Hello, I would like to book an appointment with Physio - The Therapeutic Moves.");
            window.open(`https://wa.me/919641568109?text=${message}`, '_blank');
        }

        window.bookDoctorAppointment = function(doctorName) {
            const message = encodeURIComponent(`Hello, I would like to book an appointment with ${doctorName} at Physio - The Therapeutic Moves.`);
            window.open(`https://wa.me/919641568109?text=${message}`, '_blank');
        }

        window.buyProduct = function(productName) {
            const message = encodeURIComponent(`I would like to buy ${productName}.`);
            window.open(`https://wa.me/919641568109?text=${message}`, '_blank');
        }

        // Doctor details modal functions
        window.showDoctorDetails = function(doctor) {
            document.getElementById('modalDoctorName').textContent = doctor.name;
            document.getElementById('modalDoctorQualification').textContent = doctor.qualification;
            document.getElementById('modalDoctorFees').textContent = `Consultation Fee: ${doctor.fees}`;
            document.getElementById('modalDoctorDetails').textContent = doctor.details;
            
            const avatar = document.getElementById('modalDoctorAvatar');
            if (doctor.photoUrl) {
                avatar.innerHTML = `<img src="${doctor.photoUrl}" alt="${doctor.name}" style="width: 70px; height: 70px; border-radius: 50%; object-fit: cover;">`;
            } else {
                avatar.innerHTML = 'üë®‚Äç‚öïÔ∏è';
            }
            
            document.getElementById('modalBookingBtn').onclick = () => {
                bookDoctorAppointment(doctor.name);
                closeDoctorDetails();
            };
            
            document.getElementById('doctorDetailsModal').style.display = 'block';
        }

        window.closeDoctorDetails = function() {
            document.getElementById('doctorDetailsModal').style.display = 'none';
        }

        window.showServiceDetails = function(service) {
            document.getElementById('serviceDetailsTitle').textContent = service.title;
            const content = document.getElementById('serviceDetailsContent');
            content.innerHTML = `
                <p style="margin-bottom: 1rem; color: #666;">${service.description}</p>
                <h4 style="color: #2c8577; margin-bottom: 1rem;">Available Tests & Treatments:</h4>
                ${service.tests?.map(test => `
                    <div class="test-item">
                        <span>${test.name}</span>
                        <span style="font-weight: 600; color: #2c8577;">${test.price}</span>
                    </div>
                `).join('') || ''}
            `;
            document.getElementById('serviceDetailsModal').style.display = 'block';
        }

        window.closeServiceDetails = function() {
            document.getElementById('serviceDetailsModal').style.display = 'none';
        }

        window.showAdminLogin = function() {
            document.getElementById('adminModal').style.display = 'block';
            if (document.getElementById('mobileMenu').classList.contains('active')) {
                toggleMenu();
            }
        }

        window.closeAdminModal = function() {
            document.getElementById('adminModal').style.display = 'none';
        }

        // Admin functions
        document.getElementById('adminLoginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            try {
                await signInWithEmailAndPassword(auth, username, password);
                document.getElementById('adminModal').style.display = 'none';
                document.getElementById('adminDashboard').classList.add('active');
                document.querySelector('.main').style.display = 'none';
                initAdminTabs();
                renderAdminLists();
                updateAdminForm();
            } catch (error) {
                alert('Invalid credentials');
            }
        });

        window.logout = function() {
            signOut(auth);
            document.getElementById('adminDashboard').classList.remove('active');
            document.querySelector('.main').style.display = 'block';
        }

        // Initialize the site
        loadSiteData();

        // Close modals when clicking outside
        window.onclick = function(event) {
            const adminModal = document.getElementById('adminModal');
            const serviceModal = document.getElementById('serviceDetailsModal');
            const doctorModal = document.getElementById('doctorDetailsModal');
            const editModal = document.getElementById('editModal');
            
            if (event.target == adminModal) {
                adminModal.style.display = 'none';
            }
            if (event.target == serviceModal) {
                serviceModal.style.display = 'none';
            }
            if (event.target == doctorModal) {
                doctorModal.style.display = 'none';
            }
            if (event.target == editModal) {
                editModal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
